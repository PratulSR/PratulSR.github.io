'use client';

import { useState, useEffect, useRef, useCallback } from 'react';

interface TerminalModeProps {
    onExit: () => void;
}

// ASCII Art Resume
const RESUME_ASCII = `
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                                      â•‘
â•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—                                     â•‘
â•‘   â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘                                     â•‘
â•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘                                     â•‘
â•‘   â–ˆâ–ˆâ•”â•â•â•â• â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘                                     â•‘
â•‘   â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—                                â•‘
â•‘   â•šâ•â•     â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•   â•šâ•â•    â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â•                                â•‘
â•‘                                                                                      â•‘
â•‘   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—   â•‘
â•‘   â•‘  SOFTWARE ENGINEER | FOUNDING ENGINEER | LOVES ABCD                        â•‘   â•‘
â•‘   â•‘  (Anything Backend Cloud & Data)                                            â•‘   â•‘
â•‘   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â•‘
â•‘                                                                                      â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘   â”‚ EXPERIENCE                                                                   â”‚   â•‘
â•‘   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â•‘
â•‘   â”‚ > Founding Engineer @ Done. Life           Dec 2024 - Present              â”‚   â•‘
â•‘   â”‚   AI-first productivity platform | Zero-to-One | App Store deployed        â”‚   â•‘
â•‘   â”‚                                                                              â”‚   â•‘
â•‘   â”‚ > Software Engineer @ Accenture            Jun 2024 - Dec 2024             â”‚   â•‘
â•‘   â”‚   Serverless APIs | 80% automation | Event-driven architecture             â”‚   â•‘
â•‘   â”‚                                                                              â”‚   â•‘
â•‘   â”‚ > Casual Academic @ USYD                   Feb 2024 - Present              â”‚   â•‘
â•‘   â”‚   335+ students | ML & Python | 95% positive feedback                       â”‚   â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘                                                                                      â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘   â”‚ SKILLS                                                                       â”‚   â•‘
â•‘   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â•‘
â•‘   â”‚ Cloud:  AWS Lambda | EventBridge | Step Functions | DynamoDB | OpenSearch  â”‚   â•‘
â•‘   â”‚ AI/ML:  OpenAI API | LangChain | Prompt Engineering | Computer Vision      â”‚   â•‘
â•‘   â”‚ Backend: Python | TypeScript | Node.js | PostgreSQL | REST APIs            â”‚   â•‘
â•‘   â”‚ Tools:  Git | CloudFormation | Terraform | Docker | Agile/Scrum            â”‚   â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘                                                                                      â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘   â”‚ EDUCATION                                                                    â”‚   â•‘
â•‘   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â•‘
â•‘   â”‚ University of Sydney                                                        â”‚   â•‘
â•‘   â”‚ B.Eng (Hons) Software Engineering | First Class Honours                    â”‚   â•‘
â•‘   â”‚ Honours WAM: 79.2 | Overall WAM: 76.8                                       â”‚   â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘                                                                                      â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘   â”‚ CONTACT                                                                      â”‚   â•‘
â•‘   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â•‘
â•‘   â”‚ Email:    hire@hellopratul.com                                              â”‚   â•‘
â•‘   â”‚ LinkedIn: linkedin.com/in/pratulsinghraghava                                â”‚   â•‘
â•‘   â”‚ GitHub:   github.com/PratulSR                                               â”‚   â•‘
â•‘   â”‚ Website:  hellopratul.com                                                   â”‚   â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘                                                                                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
`;

// Command outputs
const COMMANDS: { [key: string]: string | (() => string) } = {
    help: `
Available commands:
  help       - Show this help message
  whoami     - Learn about Pratul
  skills     - View technical skills
  projects   - List featured projects
  resume     - Display ASCII resume
  hire       - Get contact information
  clear      - Clear the terminal
  exit       - Exit terminal mode

Tip: Type a command and press Enter
`,
    whoami: `
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       $ whoami                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  Name:      Pratul Singh Raghava                             â”‚
â”‚  Title:     Software Engineer                                â”‚
â”‚  Location:  Sydney, Australia                                â”‚
â”‚  Status:    Open to opportunities                            â”‚
â”‚                                                               â”‚
â”‚  Tagline:   "Loves ABCD - Anything Backend Cloud & Data"     â”‚
â”‚                                                               â”‚
â”‚  Bio:       Founding Engineer who bridges complex backend    â”‚
â”‚             logic and user-centric product delivery.         â”‚
â”‚             First Class Honours from USYD.                   â”‚
â”‚                                                               â”‚
â”‚  Fun Facts:                                                   â”‚
â”‚  - Can name every country in the world in under 10 mins     â”‚
â”‚  - Watches every F1 race religiously ğŸï¸                      â”‚
â”‚  - Scaled USYD Robotics Club to 1,800+ members               â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
`,
    skills: `
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Technical Skills                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆ CLOUD (Expert)                                         â”‚
â”‚  â””â”€ AWS Lambda â€¢ EventBridge â€¢ Step Functions                â”‚
â”‚  â””â”€ DynamoDB â€¢ OpenSearch â€¢ CloudFormation                   â”‚
â”‚  â””â”€ S3 â€¢ API Gateway â€¢ IAM                                   â”‚
â”‚                                                               â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–‘ AI/ML (Advanced)                                       â”‚
â”‚  â””â”€ OpenAI API â€¢ LangChain â€¢ Prompt Engineering             â”‚
â”‚  â””â”€ Computer Vision â€¢ Scikit-learn â€¢ Pandas                 â”‚
â”‚                                                               â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆ BACKEND (Expert)                                       â”‚
â”‚  â””â”€ Python â€¢ TypeScript â€¢ Node.js                           â”‚
â”‚  â””â”€ PostgreSQL â€¢ REST APIs â€¢ Serverless                     â”‚
â”‚                                                               â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–‘ TOOLS (Advanced)                                       â”‚
â”‚  â””â”€ Git â€¢ Docker â€¢ Terraform â€¢ Jira â€¢ Agile/Scrum           â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
`,
    projects: `
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Featured Projects                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  [1] Done. Life (2024)                                       â”‚
â”‚      AI Productivity Platform | Founding Engineer            â”‚
â”‚      "70% faster response time with Split-Path AI engine"    â”‚
â”‚                                                               â”‚
â”‚  [2] Accenture Permissions Engine (2024)                     â”‚
â”‚      Enterprise Security Automation | Software Engineer      â”‚
â”‚      "80% reduction in manual provisioning"                  â”‚
â”‚                                                               â”‚
â”‚  [3] USYD Robotics Club (2022-2025)                         â”‚
â”‚      Technical Community Leadership | President              â”‚
â”‚      "Scaled from 230 to 1,800+ members"                     â”‚
â”‚                                                               â”‚
â”‚  [4] Scholar Score (2024)                                    â”‚
â”‚      Course Review Platform | Personal Project               â”‚
â”‚      "Rate My Professor for USYD courses"                    â”‚
â”‚                                                               â”‚
â”‚  [5] Privacy Finance Tracker (2023)                          â”‚
â”‚      Full-Stack Application | Personal Project               â”‚
â”‚      "Local-first expense tracking"                          â”‚
â”‚                                                               â”‚
â”‚  Type 'exit' and visit /projects for full details            â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
`,
    resume: RESUME_ASCII,
    hire: `
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                      LET'S CONNECT!                          â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                               â•‘
â•‘   ğŸ“§ Email:    hire@hellopratul.com                          â•‘
â•‘                                                               â•‘
â•‘   ğŸ’¼ LinkedIn: linkedin.com/in/pratulsinghraghava            â•‘
â•‘                                                               â•‘
â•‘   ğŸ™ GitHub:   github.com/PratulSR                           â•‘
â•‘                                                               â•‘
â•‘   ğŸŒ Website:  hellopratul.com                               â•‘
â•‘                                                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                               â•‘
â•‘   Currently: Open to opportunities in                        â•‘
â•‘   â€¢ Cloud Architecture                                        â•‘
â•‘   â€¢ AI/ML Engineering                                         â•‘
â•‘   â€¢ Full-Stack Development                                    â•‘
â•‘                                                               â•‘
â•‘   Based in Sydney, open to remote worldwide ğŸŒ               â•‘
â•‘                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
`,
};

export default function TerminalMode({ onExit }: TerminalModeProps) {
    const [history, setHistory] = useState<Array<{ type: 'input' | 'output'; content: string }>>([
        {
            type: 'output', content: `
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                    â•‘
â•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—                                 â•‘
â•‘   â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—                                â•‘
â•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•                                â•‘
â•‘   â–ˆâ–ˆâ•”â•â•â•â• â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—                                â•‘
â•‘   â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•                                â•‘
â•‘   â•šâ•â•     â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•                                 â•‘
â•‘                                                                    â•‘
â•‘   Welcome to PRDb Terminal v1.0                                   â•‘
â•‘   The Pratul Database - Command Line Interface                    â•‘
â•‘                                                                    â•‘
â•‘   Type 'help' to see available commands                           â•‘
â•‘   Type 'exit' to return to the website                            â•‘
â•‘                                                                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
` },
    ]);
    const [input, setInput] = useState('');
    const [commandHistory, setCommandHistory] = useState<string[]>([]);
    const [historyIndex, setHistoryIndex] = useState(-1);
    const terminalRef = useRef<HTMLDivElement>(null);
    const inputRef = useRef<HTMLInputElement>(null);

    // Scroll to bottom when history changes
    useEffect(() => {
        if (terminalRef.current) {
            terminalRef.current.scrollTop = terminalRef.current.scrollHeight;
        }
    }, [history]);

    // Focus input on mount
    useEffect(() => {
        inputRef.current?.focus();
    }, []);

    const handleCommand = useCallback((cmd: string) => {
        const trimmedCmd = cmd.trim().toLowerCase();

        // Add to command history
        if (trimmedCmd) {
            setCommandHistory(prev => [trimmedCmd, ...prev.slice(0, 49)]);
            setHistoryIndex(-1);
        }

        // Add input to history
        setHistory(prev => [...prev, { type: 'input', content: `$ ${cmd}` }]);

        if (trimmedCmd === 'exit' || trimmedCmd === 'quit' || trimmedCmd === 'q') {
            setHistory(prev => [...prev, { type: 'output', content: 'Exiting terminal mode...' }]);
            setTimeout(onExit, 500);
            return;
        }

        if (trimmedCmd === 'clear' || trimmedCmd === 'cls') {
            setHistory([]);
            return;
        }

        const output = COMMANDS[trimmedCmd];
        if (output) {
            const content = typeof output === 'function' ? output() : output;
            setHistory(prev => [...prev, { type: 'output', content }]);
        } else if (trimmedCmd === '') {
            // Do nothing for empty input
        } else {
            setHistory(prev => [...prev, {
                type: 'output',
                content: `Command not found: ${trimmedCmd}\nType 'help' for available commands.`
            }]);
        }
    }, [onExit]);

    const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {
        if (e.key === 'Enter') {
            handleCommand(input);
            setInput('');
        } else if (e.key === 'ArrowUp') {
            e.preventDefault();
            if (commandHistory.length > 0 && historyIndex < commandHistory.length - 1) {
                const newIndex = historyIndex + 1;
                setHistoryIndex(newIndex);
                setInput(commandHistory[newIndex]);
            }
        } else if (e.key === 'ArrowDown') {
            e.preventDefault();
            if (historyIndex > 0) {
                const newIndex = historyIndex - 1;
                setHistoryIndex(newIndex);
                setInput(commandHistory[newIndex]);
            } else if (historyIndex === 0) {
                setHistoryIndex(-1);
                setInput('');
            }
        } else if (e.key === 'Escape') {
            onExit();
        }
    };

    return (
        <div
            className="fixed inset-0 z-50 bg-black flex flex-col font-mono"
            onClick={() => inputRef.current?.focus()}
        >
            {/* Terminal Header */}
            <div className="flex items-center justify-between px-4 py-2 bg-[#1a1a1a] border-b border-green-500/30">
                <div className="flex items-center gap-2">
                    <div className="w-3 h-3 rounded-full bg-red-500"></div>
                    <div className="w-3 h-3 rounded-full bg-yellow-500"></div>
                    <div className="w-3 h-3 rounded-full bg-green-500"></div>
                </div>
                <span className="text-green-500 text-sm">prdb@terminal ~ </span>
                <button
                    onClick={onExit}
                    className="text-green-500/50 hover:text-green-500 transition-colors text-sm"
                >
                    [ESC to exit]
                </button>
            </div>

            {/* Terminal Content */}
            <div
                ref={terminalRef}
                className="flex-1 overflow-y-auto p-4 text-green-500 text-sm leading-relaxed"
            >
                {history.map((item, index) => (
                    <div
                        key={index}
                        className={`whitespace-pre-wrap ${item.type === 'input' ? 'text-green-300' : 'text-green-500/80'}`}
                    >
                        {item.content}
                    </div>
                ))}

                {/* Input Line */}
                <div className="flex items-center gap-2 mt-2">
                    <span className="text-green-300">$</span>
                    <input
                        ref={inputRef}
                        type="text"
                        value={input}
                        onChange={(e) => setInput(e.target.value)}
                        onKeyDown={handleKeyDown}
                        className="flex-1 bg-transparent text-green-300 outline-none caret-green-500"
                        spellCheck={false}
                        autoComplete="off"
                        autoCapitalize="off"
                    />
                    <span className="w-2 h-4 bg-green-500 animate-pulse"></span>
                </div>
            </div>

            {/* Quick Commands Bar */}
            <div className="px-4 py-3 bg-[#1a1a1a] border-t border-green-500/30">
                <div className="flex flex-wrap gap-2 text-xs">
                    {['help', 'whoami', 'skills', 'projects', 'resume', 'hire', 'exit'].map((cmd) => (
                        <button
                            key={cmd}
                            onClick={() => {
                                handleCommand(cmd);
                            }}
                            className="px-3 py-1.5 border border-green-500/30 text-green-500/70 hover:text-green-500 hover:border-green-500/60 rounded transition-colors"
                        >
                            {cmd}
                        </button>
                    ))}
                </div>
            </div>
        </div>
    );
}
